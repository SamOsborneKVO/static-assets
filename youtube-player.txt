<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <title>YouTube Player</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>
</head>
<body>
  <iframe id="youtube-player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

  <script>
    (function() {
      // Read params from hash fragment (e.g. #v=VIDEO_ID&autoplay=1)
      const hashParams = new URLSearchParams(window.location.hash.slice(1));
      const videoId = hashParams.get('v');

      if (!videoId) {
        document.body.innerHTML = '<p style="color: red; padding: 20px;">Error: No video ID provided</p>';
        return;
      }

      // Build YouTube embed parameters
      const embedParams = new URLSearchParams({
        enablejsapi: '1',
        origin: window.location.origin
      });

      // Pass through supported parameters
      const supportedParams = [
        'autoplay', 'loop', 'mute', 'controls',
        'modestbranding', 'playsinline', 'rel', 'color'
      ];

      supportedParams.forEach(param => {
        const value = hashParams.get(param);
        if (value !== null) {
          embedParams.set(param, value);
        }
      });

      // Construct the embed URL using youtube-nocookie.com for privacy
      const embedUrl = `https://www.youtube-nocookie.com/embed/${videoId}?${embedParams.toString()}`;

      // Set iframe source
      document.getElementById('youtube-player').src = embedUrl;
    })();
  </script>
</body>
</html>
